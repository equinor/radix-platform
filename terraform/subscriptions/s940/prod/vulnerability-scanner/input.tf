locals {

  external_outputs = {
    common   = data.terraform_remote_state.common.outputs
  //  keyvault = data.terraform_remote_state.keyvault.outputs.data
  }

  backend = {
    resource_group_name  = "s940-tfstate"
    storage_account_name = "s940radixinfra"
    container_name       = "infrastructure"
    subscription_id      = "ded7ca41-37c8-4085-862f-b11d21ab341a"
  }
}


data "terraform_remote_state" "common" {
  backend = "azurerm"
  config = merge(
    local.backend,
  { key = "prod/common/terraform.tfstate" })
}

#data "terraform_remote_state" "keyvault" {
#  backend = "azurerm"
#  config = merge(
#    local.backend,
#  { key = "playground/key-vault/terraform.tfstate" })
#}
#
#
#


